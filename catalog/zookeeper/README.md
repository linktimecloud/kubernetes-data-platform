# 介绍

ZooKeeper是一个分布式的开源协调服务,用于分布式应用程序。它暴露了一组简单的基元,分布式应用程序可以依靠这些基元来实现更高层次的服务,如同步、配置维护和组与命名。它的设计目的是易于编程,并采用了类似文件系统目录树结构的数据模型。它使用Java运行,并为Java和C提供了绑定。

协调服务出了名的难以做对。它们特别容易出现竞争条件和死锁等错误。ZooKeeper的目标是减轻分布式应用程序从零开始实现协调服务的责任。

## 设计目标

**ZooKeeper简单。** ZooKeeper允许分布式进程通过共享的分层命名空间(组织结构类似标准文件系统)来协调。命名空间由数据寄存器(在ZooKeeper中称为znode)组成,类似文件和目录。与典型的为存储设计的文件系统不同,ZooKeeper的数据保存在内存中,这意味着ZooKeeper可以实现很高的吞吐量和低延迟。

ZooKeeper的实现非常注重高性能、高可用性、严格顺序的访问。ZooKeeper的性能意味着它可以在大型分布式系统中使用。可靠性避免它成为单点故障。严格的顺序意味着复杂的同步原语可以在客户端实现。

**ZooKeeper是复制的。** 像它协调的分布式进程一样,ZooKeeper本身也打算在一组称为集合的主机上复制。
组成ZooKeeper服务的服务器必须彼此了解。它们在内存中维护状态映像,以及持久存储中的事务日志和快照。只要大多数服务器可用,ZooKeeper服务就将可用。

客户端连接到单个ZooKeeper服务器。客户端维护一个TCP连接,通过该连接它可以发送请求、获取响应、获取监视事件和发送心跳。如果与服务器的TCP连接中断,客户端将连接到不同的服务器。

**ZooKeeper是有序的。** ZooKeeper使用一个数字来标识每个更新,这个数字反映了ZooKeeper所有事务的顺序。后续操作可以使用该顺序来实现更高级的抽象,如同步原语。

**ZooKeeper很快。** 它在“读优先”的工作负载中特别快。ZooKeeper应用程序在数千台机器上运行,并且在读取比写入更常见的比例约为10:1的情况下性能最佳。